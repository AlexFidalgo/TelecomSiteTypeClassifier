function request_text($uf) {

    $name =

return $name
}

$session = New-Object Microsoft.PowerShell.Commands.WebRequestSession

$session.UserAgent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.82"

$ufarray = "AC","AL","AM","AP","BA","CE","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"

foreach($uf in $ufarray){

	Write-Host "Fazendo $uf"
	$redirect = (Invoke-WebRequest -UseBasicParsing -Uri "https://sistemas.anatel.gov.br/se/public/view/b/export_licenciamento.php" `
	-Method "POST" `
	-WebSession $session `
	-Headers @{
	"Accept"="*/*"
	  "Accept-Encoding"="gzip, deflate, br"
	  "Accept-Language"="en-GB,en-US;q=0.9,en;q=0.8,pt;q=0.7"
	  "Origin"="https://sistemas.anatel.gov.br"
	  "Referer"="https://sistemas.anatel.gov.br/se/public/view/b/licenciamento.php?view=licenciamento"
	  "Sec-Fetch-Dest"="empty"
	  "Sec-Fetch-Mode"="cors"
	  "Sec-Fetch-Site"="same-origin"
	  "sec-ch-ua"="`"Not.A/Brand`";v=`"8`", `"Chromium`";v=`"114`", `"Google Chrome`";v=`"114`""
	  "sec-ch-ua-mobile"="?0"
	  "sec-ch-ua-platform"="`"Windows`""
	} `
	-ContentType "multipart/form-data; boundary=----WebKitFormBoundarympfyiq0ApUkPjhx4" `
	-Body ([System.Text.Encoding]::UTF8.GetBytes("------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_freq1`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_freq2`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_gsearch`"$([char]13)$([char]10)$([char]13)$([char]10)1$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_lat`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_lon`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_dist`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fa_uf`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"skip`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"filter`"$([char]13)$([char]10)$([char]13)$([char]10)1$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"rpp`"$([char]13)$([char]10)$([char]13)$([char]10)50$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_0`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_1`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_2`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_3`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_4`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_5`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_6`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_7`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_8`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_9`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_10`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_11`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_12`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_13`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_14`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_15`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_16`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_17`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_18`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_19`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_20`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_21`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_22`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_23`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_24`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_25`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_26`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_27`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_28`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_29`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_30`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_31`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_32`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_33`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_34`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_35`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_36`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_37`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_38`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"sort_39`"$([char]13)$([char]10)$([char]13)$([char]10)0$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_0`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_1`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_2`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_3`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_4`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_5`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_6`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_7`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_8`"$([char]13)$([char]10)$([char]13)$([char]10)$uf$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_9`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_10`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_11`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_12`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_13`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_14`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_15`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_16`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_17`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_18`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_19`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_20`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_21`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_22`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_23`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_24`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_25`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_26`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_27`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_28`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_29`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_30`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_31`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_32`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_33`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_34`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_35`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_36`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_37`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_38`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"fc_39`"$([char]13)$([char]10)$([char]13)$([char]10)$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"wfid`"$([char]13)$([char]10)$([char]13)$([char]10)licencas$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4$([char]13)$([char]10)Content-Disposition: form-data; name=`"view`"$([char]13)$([char]10)$([char]13)$([char]10)licenciamento$([char]13)$([char]10)------WebKitFormBoundarympfyiq0ApUkPjhx4--$([char]13)$([char]10)"))
	).Content
	
	$redirect = $redirect | ConvertFrom-Json
	
	$downloadurl = 'https://sistemas.anatel.gov.br/se/public/view/b/export_licenciamento.php'+$redirect.redirectUrl
	
        $destpath = ".\download_temp\$uf.zip"
        
        if (-Not (Test-Path -Path ".\download_temp" -PathType Container)) {
            New-Item -Path ".\download_temp" -ItemType Directory
        }
        
        Invoke-WebRequest $downloadurl -OutFile $destpath
}

